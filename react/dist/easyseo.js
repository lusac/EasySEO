!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("React"),require("ReactDOM")):"function"==typeof define&&define.amd?define(["React","ReactDOM"],t):"object"==typeof exports?exports.easyseo=t(require("React"),require("ReactDOM")):e.easyseo=t(e.React,e.ReactDOM)}(this,function(e,t){return function(e){function t(n){if(r[n])return r[n].exports;var a=r[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var r={};return t.m=e,t.c=r,t.p="/dist/",t(0)}([function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e){this.init(e)}var o=r(1),s=n(o),i=r(2),l=n(i),u=r(3),c=n(u);a.prototype.init=function(e){this.fields=e.fields||[],this.googleInit(),this.build()},a.prototype.googleInit=function(){google.load("visualization","1")},a.prototype.build=function(){for(var e=0;e<=this.fields.length-1;e++){var t=this.fields[e],r="easyseo-id-"+t.name;this.insertContainer(t,r),this.renderReactComponent(t,r)}},a.prototype.insertContainer=function(e,t){var r=document.createElement("span");r.id=t,e.parentNode.insertBefore(r,e.nextSibling)},a.prototype.renderReactComponent=function(e,t){l["default"].render(s["default"].createElement(c["default"],{refer:e}),document.getElementById(t))},window.EasySEO=a},function(t,r){t.exports=e},function(e,r){e.exports=t},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(1),u=n(l),c=r(2),f=(n(c),r(4)),p=n(f),d={remover:{def:"verb",opts:["tirar","transportar","arredar","mover","levar","mudar"]},make:{def:"noun",opts:["maquiagem","maquilagem"]},limpar:{def:"verb",opts:["tirar","lavar","assear","mundificar","higienizar","varrer","ensaboar","despoluir","espanar","escovar","esfregar","desempoar","desempoeirar","absterger","detergir","desencardir","desenxovalhar","desenodoar","desenfarruscar","apagar","abluir"]},tinta:{def:"noun",opts:["colorante","tintura","pigmento","corante"]},caneta:{def:"noun",opts:["tinteiro"]},aprenda:{def:"verb",opts:["descobrir","conhecer","estudar","assimilar","saber","perceber","entender","compreender","instruir-se"]},customizar:{def:"verb",opts:["personalizar","individualizar","individuar","particularizar","singularizar"]},passos:{def:"noun",opts:["etapas","fases","pontos","estágios","estádios"]}},m=function(e){function t(e){a(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.refer=e.refer,r.prefixClass="easyseo-id-"+r.props.refer.name,r.containerId=r.prefixClass+"-container",r.termsId=r.prefixClass+"-terms",r.iframeId=r.prefixClass+"-iframe",r.initSearchVars(),r.bindEvents(),r}return s(t,e),i(t,[{key:"initSearchVars",value:function(){this.state={sentence:"",terms:[],tooltip:{}}}},{key:"emptyState",value:function(){this.state.sentece="",this.state.terms=[]}},{key:"bindEvents",value:function(){var e=this;this.refer.addEventListener("change",function(){e.searchTopRelated(this)}),this.refer.addEventListener("keyup",function(){e.setState({sentence:this.value})}),document.getElementsByTagName("html")[0].addEventListener("click",function(t){if(t.target!==e.refer&&!t.target.closest("#easyseo__tooltip")){var r=e.state.tooltip;r.isHidden=!0,e.setState({tooltip:r})}})}},{key:"searchTopRelated",value:function(e){if(e.value){this.emptyState(),this.state.sentence=e.value;for(var t=this.getTermsFromSentence(this.state.sentence),r=0;r<=t.length-1;r++)this.getTopRelatedTerm(t[r])}}},{key:"getTermsFromSentence",value:function(e){var t=e.toLowerCase(),r=t.replace(/[.,\/#!?$%\^&\*;:{}=\-_`~()]/g,""),n=r.replace(/\s{2,}/g," ");return n.split(" ")}},{key:"getTopRelatedTerm",value:function(e){var t=this.getTrendsApiUrl(e);t&&this.sendGoogleQuery(t)}},{key:"getTrendsApiUrl",value:function(e,t){var r=this.getTermSynonymous(e);if(r.length){var n=e+","+r,a=1==t?"5&w=500&h=300":"3";return this.buildTrendsApiUrl(n,a)}return""}},{key:"getTermSynonymous",value:function(e){try{return d[e].opts}catch(t){return[]}}},{key:"sendGoogleQuery",value:function(e,t){var r=t||this.handleSingleTermQueryResponse,n=new google.visualization.Query(e);n.send(r.bind(this))}},{key:"getTermsPontuationFromResponse",value:function(e){for(var t=e.G.Mf,r=t.splice(1,t.length-1),n=r[0].label,a=e.G.Nf,o=a[a.length-2].c,s=[],i=1;i<=r.length-1;i++)s.push({label:r[i-1].label,value:o[i].v});return s.sort(function(e,t){return t.value-e.value}),{main:n,all:s}}},{key:"handleSingleTermQueryResponse",value:function(e){try{this.state.terms.push(this.getTermsPontuationFromResponse(e)),this.setState({terms:this.state.terms})}catch(t){console.log(t)}}},{key:"buildTrendsApiUrl",value:function(e,t){return"http://www.google.com/trends/fetchComponent?hl=pt-BR&q="+e+"&geo=BR&date=today%2012-m&cid=TIMESERIES_GRAPH_0&export="+t}},{key:"getHighlightedSentence",value:function(){var e={__html:""};if(this.state.sentence.length>0){for(var t=[],r=this.state.sentence.split(" "),n=0;n<=this.state.terms.length-1;n++)t.push(this.state.terms[n].main);for(var n=0,a=r.length;n<a;n++)t.includes(r[n])&&(r[n]=['<span class="easyseo__el-highlight">',r[n],"</span>"].join(""));e.__html=r.join(" ")}return e}},{key:"showTooltip",value:function(e,t){for(var r=e.textContent,n=void 0,a=0;a<=this.state.terms.length-1;a++)if(this.state.terms[a].main==r){n=this.state.terms[a];break}this.setState({tooltip:{tooltipHandler:this.tooltipHandler.bind(this),isHidden:!1,terms:n,pos:{top:t.top,left:t.left}}})}},{key:"componentDidMount",value:function(){var e=this;document.getElementById(this.containerId).appendChild(this.refer),this.refer.className=this.refer.className+" easyseo__el-text",this.mirrorElement=document.querySelector("#"+this.containerId+" .easyseo__el-mirror"),this.mirrorElement.style.cssText=document.defaultView.getComputedStyle(this.refer,"").cssText,this.refer.addEventListener("click",function(t){for(var r=t.clientX,n=t.clientY,a=document.getElementsByClassName("easyseo__el-highlight"),o=0;o<=a.length-1;o++){var s=a[o],i=s.getBoundingClientRect();if(r>=i.left&&r<=i.right&&n>=i.top&&n<=i.bottom){e.showTooltip(s,{top:i.bottom+10,left:(i.left+i.right)/2});break}}})}},{key:"tooltipHandler",value:function(e){var t=this.state.sentence.replace(e.currentTarget.dataset.oldterm,e.currentTarget.dataset.newterm);this.setState({sentence:t}),this.refer.value=t,this.refer.dispatchEvent(new Event("change"))}},{key:"render",value:function(){return u["default"].createElement("span",null,u["default"].createElement("div",{id:this.containerId,className:"easyseo__el-container"},u["default"].createElement("div",{className:"easyseo__el-mirror",contentEditable:!0,dangerouslySetInnerHTML:this.getHighlightedSentence()})),u["default"].createElement(p["default"],{params:this.state.tooltip}))}}]),t}(u["default"].Component);t["default"]=m},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(1),u=n(l),c=r(2),f=(n(c),r(5)),p=n(f),d=r(6),m=n(d),h=function(e){function t(e){a(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.props.params.isHidden=r.props.params.isHidden||!0,r.props.params.terms=r.props.params.terms||{},r.props.params.pos=r.props.params.pos||{top:0,left:0},r.width=0,r}return s(t,e),i(t,[{key:"renderTerms",value:function(){var e=this;if(this.props.params.terms.all)return u["default"].createElement("span",null,this.props.params.terms.all.map(function(t,r){if(e.props.params.terms.main!==t.label)return u["default"].createElement("span",{className:"easyseo__tooltip-info-term",key:r,"data-newterm":t.label,"data-oldterm":e.props.params.terms.main,onClick:e.changeTerms.bind(e)},u["default"].createElement("span",{className:"main-term"},e.props.params.terms.main,u["default"].createElement("span",{className:"other-term"},u["default"].createElement(p["default"],null),u["default"].createElement(m["default"],null),t.label)))}))}},{key:"getWidth",value:function(){var e=document.getElementById("easyseo__tooltip");return e?e.offsetWidth:0}},{key:"changeTerms",value:function(e){this.props.params.tooltipHandler(e),this.closeHandler()}},{key:"closeHandler",value:function(){this.props.params.isHidden=!0,this.setState({params:this.props.params})}},{key:"render",value:function(){var e=this.getWidth(),t={visibility:this.props.params.isHidden?"hidden":"visible",top:this.props.params.pos.top,left:this.props.params.pos.left-e/2};return u["default"].createElement("span",{id:"easyseo__tooltip",className:"easyseo__tooltip",style:t},u["default"].createElement("span",{className:"easyseo__tooltip-close",onClick:this.closeHandler.bind(this)},"✕"),u["default"].createElement("strong",{className:"easyseo__tooltip-title"},"Redomendação de SEO"),u["default"].createElement("p",{className:"easyseo__tooltip-subtitle"},"Substitua as palavras para ganhar mais relevância no Google"),u["default"].createElement("span",{className:"easyseo__tooltip-info",key:"ola"},this.renderTerms()),u["default"].createElement("a",{href:"#",className:"easyseo__tooltip-details"},"ver detalhes"))}}]),t}(u["default"].Component);t["default"]=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(1),u=n(l),c=r(2),f=(n(c),function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),i(t,[{key:"render",value:function(){return u["default"].createElement("span",{className:"easyseo__arrow-right"},u["default"].createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16px",height:"8px",viewBox:"0 0 16 8",version:"1.1"},u["default"].createElement("g",{stroke:"none",fill:"none"},u["default"].createElement("g",{transform:"translate(-631, -628)"},u["default"].createElement("g",{transform:"translate(495, 432)"},u["default"].createElement("g",{transform:"translate(144, 200) rotate(-90) translate(-144, -200) translate(132, 188)"},u["default"].createElement("g",null,u["default"].createElement("polygon",{points:"0 0 24 0 24 24 0 24"}),u["default"].createElement("polygon",{fill:"#CCCCCC",points:"8 16 12 20 16 16"}),u["default"].createElement("rect",{fill:"#CCCCCC",x:"11",y:"4",width:"2",height:"12"}))))))))}}]),t}(u["default"].Component));t["default"]=f},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(1),u=n(l),c=r(2),f=(n(c),function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),i(t,[{key:"render",value:function(){return u["default"].createElement("span",{className:"easyseo__arrow-reverse"},u["default"].createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",version:"1.1"},u["default"].createElement("g",{stroke:"none",fill:"none"},u["default"].createElement("g",{transform:"translate(-631, -584)"},u["default"].createElement("g",{transform:"translate(527, 577)"},u["default"].createElement("g",{transform:"translate(112, 15) rotate(-90) translate(-112, -15) translate(100, 3)"},u["default"].createElement("g",null,u["default"].createElement("polygon",{points:"0 0 24 0 24 24 0 24"}),u["default"].createElement("polygon",{fill:"#FAFAFA",points:"12 16 16 20 20 16"}),u["default"].createElement("rect",{fill:"#FAFAFA",x:"15",y:"4",width:"2",height:"12"}),u["default"].createElement("polygon",{fill:"#FAFAFA",transform:"translate(8, 6) scale(-1, -1) translate(-8, -6) ",points:"4 4 8 8 12 4"}),u["default"].createElement("rect",{fill:"#FAFAFA",transform:"translate(8, 14) scale(-1, -1) translate(-8, -14) ",x:"7",y:"8",width:"2",height:"12"}))))))))}}]),t}(u["default"].Component));t["default"]=f}])});
//# sourceMappingURL=easyseo.js.map